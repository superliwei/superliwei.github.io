function trace(a){console.log(a)}var GlobalEditor={},ComponentEditor={};
ComponentEditor.init=function(){this.component=new ComponentEditor.Component;this.mainLayout=new ComponentEditor.MainLayout("#mainLayout");this.topMenu=new ComponentEditor.TopMenu("#topMenu");this.textEditor=new ComponentEditor.TextEditor;this.editorContainer=new GlobalEditor.EditorContainer($("#editorContainer"));GlobalEditor.editorContainer=this.editorContainer;this.propertiesPanel=new ComponentEditor.PropertiesPanel;this.settingPanel=new ComponentEditor.SettingPanel("#settingPanel");this.historyPanel=
new GlobalEditor.HistoryPanel;this.inputWin=new GlobalEditor.InputWin("#inputWin");this.settingWin=new ComponentEditor.SettingWin("#settingWin")};$(function(){ComponentEditor.init()});
ComponentEditor.MainLayout=function(a){function b(){k=($(window).width()-l)*0.5;i=i==0?i:k;d.outerWidth(i);e.outerWidth(l);var a=$(window).width()-i-l-f.outerWidth()-g.outerWidth();c.outerWidth(a);var b=$(window).height()-$("#topMenu").outerHeight();d.outerHeight(b);e.outerHeight(b);c.outerHeight(b);c.css("left",i+f.outerWidth());e.css("left",i+a+f.outerWidth()+g.outerWidth());f.outerHeight(b);g.outerHeight(b);f.css("left",i);g.css("left",i+a+f.outerWidth());$(document).trigger(ComponentEditor.MainLayout.Event.RESIZE);
a=b-s-10;m.outerHeight(a-n.outerHeight());o.outerHeight(a);r.outerHeight(a)}this.view=$(a);var d=this.view.find("#leftBox"),c=this.view.find("#centerBox"),e=this.view.find("#rightBox"),a=this.view.find(".vDivide"),f=a.eq(0),g=a.eq(1),h=f.find(".handle"),j=g.find(".handle"),k=322,i=k,l=320;h.click(function(){i=i==k?0:k;b()});j.click(function(){l=l==320?0:320;b()});d.css("position","absolute");d.css("overflow","auto");c.css("position","absolute");e.css("position","absolute");this.view.find(".menu.tabular .item").tab();
var m=this.view.find("#propertiesPanel .segment");m.css("overflow","auto");var n=this.view.find("#propertiesPanel #header"),o=this.view.find("#historyPanel .segment");o.css("padding",5);o.css("overflow","auto");var r=this.view.find("#settingPanel .segment");r.css("overflow","auto");var s=this.view.find(".menu.tabular").outerHeight();$(window).resize(b);b();this.toggleLeft=function(){h.trigger("click")};this.toggleRight=function(){j.trigger("click")}};ComponentEditor.MainLayout.Event={RESIZE:"mainLayoutResizeEvent"};
ComponentEditor.TopMenu=function(a){function b(){$.each(e,function(){this.update()})}function d(a){function b(){if(c!="")ComponentEditor.KeyboardManager.execute(c);else switch(d){case "\u952e\u76d8\u5feb\u6377\u952e":ComponentEditor.KeyboardManager.execute("showQuickKey");break;case "\u5173\u4e8eGlobalEditor\u00b7\u7ec4\u4ef6\u7f16\u8f91\u5668":ComponentEditor.KeyboardManager.execute("about");break;case "\u505c\u6b62":ComponentEditor.KeyboardManager.execute("stop")}}var d=a.find("span.text").eq(0).text();
a.find(".item").length==0&&a.click(b);var c=a.find("span.description").text();this.update=function(){var a=!0;switch(d){case "\u64a4\u6d88":a=ComponentEditor.historyPanel.getUndoAble();break;case "\u91cd\u505a":a=ComponentEditor.historyPanel.getRedoAble();break;case "\u98de\u5230\u9009\u62e9\u7684\u76ee\u6807":a=ComponentEditor.editorContainer.viewer.selectedEntity!=null;break;case "\u5c5e\u6027\u9762\u677f":a=ComponentEditor.topMenu.panelMenuController.getSelectedValue()!="properties";break;case "\u5386\u53f2\u8bb0\u5f55":a=
ComponentEditor.topMenu.panelMenuController.getSelectedValue()!="history";break;case "\u7ec4\u4ef6\u8bbe\u7f6e":a=ComponentEditor.topMenu.panelMenuController.getSelectedValue()!="settings";break;case "\u505c\u6b62":a=ComponentEditor.component.instance!=null}this.setEnabled(a)};this.setEnabled=function(b){b?a.removeClass("disabled"):a.addClass("disabled")}}this.view=$(a);a=this.view.find(".ui.dropdown:not(.right.menu .ui.dropdown)");a.dropdown({on:"hover",onShow:function(){b()}});var c=a.find(".item"),
e=[];c.each(function(){e.push(new d($(this)))});this.panelMenuController=new function(a){var b,d={properties:$("#propertiesPanel"),history:$("#historyPanel"),settings:$("#settingPanel")};$.each(d,function(){$(this).css("display","none")});this.selectValue=function(b){a.dropdown("set selected",b)};this.getSelectedValue=function(){return b};this.getMenu=function(){return a};a.dropdown({onChange:function(a){b!=void 0&&d[b].css("display","none");b=a;d[b].css("display","block")}});this.selectValue("settings")}(this.view.find(".right.menu .ui.dropdown").eq(0));
this.getItems=function(){return c}};ComponentEditor.TextEditor=function(){var a=$("#leftBox"),b=CodeMirror(a.get(0),{value:ComponentEditor.component.text,mode:"javascript",lineNumbers:!0,textWrapping:!0,theme:"tomorrow-night-bright"});b.setSize("100%","100%");this.getText=function(){return b.doc.getValue()};this.setText=function(a){return b.doc.setValue(a)}};
ComponentEditor.PropertiesPanel=function(){this.view=$("#propertiesPanel");this.header=this.view.find("#header");this.form=this.view.find(".ui.form");this.layoutPanel=this.view.find("#layoutPanel");this.setTargets=function(a){this.clear();a.length==1&&a[0].descriptor.init(this)};this.update=function(){this.setTargets([ComponentEditor.component])};this.clearPanel=function(){this.view.find(".ui.dropdown").dropdown("hide");this.header.text("");this.form.empty()};this.clear=function(){this.clearPanel();
this.layoutPanel.empty()};this.update()};ComponentEditor.SettingPanel=function(a){this.view=$(a);this.form=this.view.find(".ui.form");this.header=$("<div>");ComponentEditor.component.settingDescriptor.init(this);this.clearPanel=function(){ComponentEditor.propertiesPanel.clearPanel.call(this)};this.update=function(){this.clearPanel();ComponentEditor.component.settingDescriptor.init(this)}};
ComponentEditor.Component=function(){this.settings={name:"BillboardComponent",desc:"BillboardComponent\u7ec4\u4ef6",gps:Cesium.Cartographic.fromDegrees(-80,38,0),icon:""};this.settingDescriptor=new ComponentEditor.ComponentSettingDescriptor(this.settings);this.descriptor=new ComponentEditor.NoneDescriptor;this.text='/**\n * Billboard\u7ec4\u4ef6\u4f8b\u5b50\n */\nGlobalEditor.ComponentManager.map.BillboardComponent = function(options)\n{\n\tGlobalEditor.ComponentManager.map.EntityComponent.call(this,options);\n\t\n\tthis.title = "Billboard\u7ec4\u4ef6";\n\t\n\tthis.getEntityOptions = function()\n\t{\n\t\tvar lat = Number(options.gps.lat);\n\t\tvar lng = Number(options.gps.lng);\n\t\t\n\t\treturn {\n\t\t\tbillboard:{\n\t\t\t\timage:options.url == undefined ? "assets/image/Cesium_Logo_overlay.png" : options.url\n\t\t\t},\n\t\t\tposition:Cesium.Cartesian3.fromDegrees(lng,lat)\n\t\t};\n\t}\n}';
this.instance=null;this.clear=function(){if(this.instance!=null)this.instance.stop(),this.instance=null,this.descriptor=new ComponentEditor.NoneDescriptor,ComponentEditor.propertiesPanel.update()};this.run=function(){var a=ComponentEditor.textEditor.getText();this.text=a;try{eval(a);var b=GlobalEditor.ComponentManager.map[this.settings.name],d=Cesium.Math.toDegrees(this.settings.gps.longitude),c=Cesium.Math.toDegrees(this.settings.gps.latitude);this.clear();this.instance=new b({gps:{lng:d,lat:c}});
this.instance.play();if(this.instance.descriptor!=void 0)this.descriptor=this.instance.descriptor;ComponentEditor.propertiesPanel.update()}catch(e){GlobalEditor.Alert.show(e)}};this.isSaveAble=function(){if(this.settings.name=="")return GlobalEditor.Alert.show("JS\u7c7b\u540d\u4e0d\u80fd\u4e3a\u7a7a!"),!1;if(this.settings.desc=="")return GlobalEditor.Alert.show("\u7ec4\u4ef6\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a!"),!1;if(this.settings.gps=="")return GlobalEditor.Alert.show("gps\u4e0d\u80fd\u4e3a\u7a7a!"),
!1;if(this.settings.icon=="")return GlobalEditor.Alert.show("\u7ec4\u4ef6\u56fe\u6807\u4e0d\u80fd\u4e3a\u7a7a!"),!1;this.text=ComponentEditor.textEditor.getText();if(this.text=="")return GlobalEditor.Alert.show("\u4ee3\u7801\u4e0d\u80fd\u4e3a\u7a7a!"),!1;return!0}};
ComponentEditor.ComponentSettingDescriptor=function(a){var b=new GlobalEditor.DescriptorDataModel(this);b.add({type:"input",name:"name",label:"JS\u7c7b\u540d"});b.add({type:"input",name:"desc",label:"\u63cf\u8ff0"});b.add({type:"cesiumCartographic",name:"gps",label:"\u9ed8\u8ba4GPS"});b.add({type:"hline"});b.add({type:"icon",name:"icon",label:"\u56fe\u6807",size:{width:100,height:100}});GlobalEditor.BasicDescriptor.call(this,b);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"name");
GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"desc");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"gps");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"icon")};ComponentEditor.NoneDescriptor=function(){GlobalEditor.ComponentBaseDescriptor.call(this);this.title="\u5f53\u524d\u7ec4\u4ef6";this.dataModel.add({type:"html",html:"<div>\u65e0\u4efb\u4f55\u5c5e\u6027</div>"})};
ComponentEditor.SettingWin=function(a){function b(a,b){this.setDisplay=function(d){a.css("display",d?"block":"none");b.css("display",d?"block":"none")}}var d=this;this.view=$(a);var c=this.view.find(".ui.menu .item"),a=this.view.find(".content").eq(0).children(),e=this.view.find(".actions").eq(0).children(),f=[new function(a,d){b.call(this,a,d);var c=this,e=a.find("input").eq(0),f=d.find("button").eq(0);this.getMaxHistory=function(){return GlobalEditor.HistoryManager.maxLen};this.setMaxHistory=function(a){GlobalEditor.HistoryManager.maxLen=
a};this.initValues=function(){e.val(this.getMaxHistory())};this.initValues();f.click(function(){c.setMaxHistory(e.val())})}(a.eq(0),e.eq(0)),new function(a,d){b.call(this,a,d);var c='<table class="ui celled table">';c+=" <thead><tr>";c+="  <th>\u5feb\u6377\u952e</th>";c+="  <th>\u8bf4\u660e</th>";c+=" </tr></thead>";c+=" <tbody>";ComponentEditor.topMenu.getItems().each(function(){if($(this).find(".item").length==0){var a=$(this).find("span.text").text(),b=$(this).find("span.description").text();b!=
""&&(c+="<tr><td>"+b+"</td><td>"+a+"</td></tr>")}});c+=" </tbody>";c+="</table>";$(c).appendTo(a)}(a.eq(1),e.eq(1)),new function(a,d){b.call(this,a,d);var c=this,e=$("<audio>",{src:"assets/sounds/m01.m4a",loop:!0}),f=a.find(".icon.music");f.addClass("red");f.click(function(){f.toggleClass("red");f.hasClass("red")?c.playMusic():c.stopMusic()});var g=this.setDisplay;this.setDisplay=function(b){g.call(this,b);a.parent().css("background-color",b?"#000000":"#ffffff");b?this.playMusic():this.stopMusic()};
this.playMusic=function(){f.hasClass("red")&&e.get(0).play()};this.stopMusic=function(){e.get(0).pause();e.get(0).currentTime=0};a.children().eq(2).text("GlobalEditor\u00b7\u7ec4\u4ef6\u7f16\u8f91\u5668 "+GlobalEditor.Settings.version);var n='<div style="color:#999999;text-align: center;">'+Base64.decode("Qmxhbms=")+"</div>";n+='<div style="color:#999999;text-align: center;">'+Base64.decode("aGVyb2JsYW5rQGdtYWlsLmNvbQ==")+"</div>";$(n).appendTo(a)}(a.eq(2),e.eq(2))],g=-1;c.each(function(a){$(this).click(function(){d.selectTabIdx(a)})});
this.view.modal({onHide:function(){f[2].stopMusic()}});this.show=function(a){f[0].initValues();this.selectTabIdx(a);this.view.modal("show")};this.selectTabIdx=function(a){g>-1&&(c.eq(g).removeClass("active blue"),f[g].setDisplay(!1));c.eq(a).addClass("active blue");g=a;f[a].setDisplay(!0);this.view.modal("refresh")}};ComponentEditor.KeyboardManager={};
ComponentEditor.KeyboardManager.init=function(){function a(a){return a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement}$(window).keydown(function(b){if(!a(b))switch(b.keyCode){case 79:b.ctrlKey&&b.preventDefault();break;case 83:b.ctrlKey&&b.preventDefault();break;case 85:b.ctrlKey&&b.preventDefault();break;case 49:b.ctrlKey&&b.preventDefault();break;case 50:b.ctrlKey&&b.preventDefault();break;case 51:b.ctrlKey&&b.preventDefault();break;case 89:b.ctrlKey&&b.preventDefault();
break;case 90:b.ctrlKey&&b.preventDefault();break;case 70:b.ctrlKey&&b.preventDefault();break;case 72:b.ctrlKey&&b.preventDefault()}});$(window).keyup(function(b){if(!a(b))switch(b.keyCode){case 79:b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+O");break;case 83:b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+S");break;case 90:b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+Z");break;case 89:b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+Y");break;case 70:b.ctrlKey&&
ComponentEditor.KeyboardManager.execute("Ctrl+F");break;case 72:b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+H");break;case 49:b.ctrlKey&&b.shiftKey?ComponentEditor.KeyboardManager.execute("Ctrl+Shift+1"):b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+1");break;case 50:b.ctrlKey&&b.shiftKey?ComponentEditor.KeyboardManager.execute("Ctrl+Shift+2"):b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+2");break;case 51:b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+3");
break;case 13:b.ctrlKey&&ComponentEditor.KeyboardManager.execute("Ctrl+Enter")}})};
ComponentEditor.KeyboardManager.execute=function(a){switch(a){case "Ctrl+O":ComponentEditor.File.openFile();break;case "Ctrl+S":ComponentEditor.File.saveFile();break;case "Ctrl+Z":GlobalEditor.HistoryManager.undo();break;case "Ctrl+Y":GlobalEditor.HistoryManager.redo();break;case "Ctrl+H":ComponentEditor.editorContainer.flyHome();break;case "Ctrl+F":ComponentEditor.editorContainer.flyToSelectedItem();break;case "Ctrl+U":ComponentEditor.settingWin.show(0);break;case "showQuickKey":ComponentEditor.settingWin.show(1);
break;case "Ctrl+1":ComponentEditor.topMenu.panelMenuController.selectValue("properties");break;case "Ctrl+2":ComponentEditor.topMenu.panelMenuController.selectValue("history");break;case "Ctrl+3":ComponentEditor.topMenu.panelMenuController.selectValue("settings");break;case "Ctrl+Shift+1":ComponentEditor.mainLayout.toggleLeft();break;case "Ctrl+Shift+2":ComponentEditor.mainLayout.toggleRight();break;case "Ctrl+Enter":ComponentEditor.component.run();break;case "stop":ComponentEditor.component.clear();
break;case "about":ComponentEditor.settingWin.show(2)}};$(function(){ComponentEditor.KeyboardManager.init()});
ComponentEditor.File={openFile:function(){var a=this;this.browser(function(b){b.name.split(".").indexOf("gecp")!==1?GlobalEditor.Alert.show("\u6587\u4ef6\u683c\u5f0f\u4e0d\u5bf9!"):a.readText(b,function(b){a.openSavedData(b)})})},saveFile:function(){if(ComponentEditor.component.isSaveAble()){var a=this;ComponentEditor.inputWin.show({icon:"save icon",title:"\u4fdd\u5b58\u6587\u4ef6",placeholder:"\u8f93\u5165\u6587\u4ef6\u540d\u79f0",rightlabel:".gecp",value:ComponentEditor.component.settings.name,
submitLabel:"\u4fdd\u5b58",onSubmit:function(b){var d=a.getSaveData(),d=JSON.stringify(d);a.saveText(d,b+".gecp")}})}},saveData:function(a,b){var d=$("<a>");d.attr("href",a);d.attr("download",b);d.get(0).click()},saveText:function(a,b){this.saveData("data:application/octet-stream;base64,"+Base64.encode(a),b)},browser:function(a){var b=$("<input type='file'>");b.trigger("click");b.change(function(){var d=b.get(0).files[0];a(d)})},readText:function(a,b){$("#loadingMask").dimmer({closable:!1});$("#loadingMask").find(".ui.text.loader").text("\u6587\u4ef6\u8bfb\u53d6\u4e2d...");
$("#loadingMask").dimmer("show");var d=new FileReader;d.onload=function(){$("#loadingMask").dimmer("hide");b(d.result)};d.readAsText(a)},getSaveData:function(){var a={name:"ComponentEditor|"+GlobalEditor.Settings.signature,date:new Date,version:GlobalEditor.Settings.version},b={};b.js=ComponentEditor.component.text;b.name=ComponentEditor.component.settings.name;b.desc=ComponentEditor.component.settings.desc;var d=Cesium.Math.toDegrees(ComponentEditor.component.settings.gps.longitude),c=Cesium.Math.toDegrees(ComponentEditor.component.settings.gps.latitude);
b.gps={lng:d,lat:c};b.icon=ComponentEditor.component.settings.icon;a.component=b;return a},resetEditor:function(){ComponentEditor.component.clear();GlobalEditor.HistoryManager.removeAll();ComponentEditor.editorContainer.viewer.camera.flyHome(0)},openSavedData:function(a){this.resetEditor();a=JSON.parse(a).component;ComponentEditor.component.text=a.js;ComponentEditor.component.settings.name=a.name;ComponentEditor.component.settings.desc=a.desc;ComponentEditor.component.settings.gps=Cesium.Cartographic.fromDegrees(a.gps.lng,
a.gps.lat,0);ComponentEditor.component.settings.icon=a.icon;ComponentEditor.textEditor.setText(ComponentEditor.component.text);ComponentEditor.settingPanel.update();ComponentEditor.component.run()}};GlobalEditor.Settings={version:"v1.0",signature:"==QP9ElY25UbMNHbXlFdkdUUyVzVZNnSyIWeWdUYR1GeoJWbzNXYHZVeiJjSzl1V1IXUHRGdZdFbzxUbOZnYR1TP"};GlobalEditor.HistoryManager={};GlobalEditor.HistoryManager.UPDATE="historyManagerUpdate";GlobalEditor.HistoryManager.maxLen=50;GlobalEditor.HistoryManager.items=[];
GlobalEditor.HistoryManager.idx=-1;GlobalEditor.HistoryManager.add=function(a,b,d){for(;this.items.length-1>this.idx;)this.items.pop();a=new GlobalEditor.HistoryItem(a,b,d);this.items.push(a);this.items.length>this.maxLen&&this.items.shift();a.redo();this.idx=this.items.length-1;$(document).trigger(GlobalEditor.HistoryManager.UPDATE)};GlobalEditor.HistoryManager.undo=function(){this.idx>-1&&(this.items[this.idx].undo(),this.idx--,$(document).trigger(GlobalEditor.HistoryManager.UPDATE))};
GlobalEditor.HistoryManager.redo=function(){this.idx<this.items.length-1&&(this.idx++,this.items[this.idx].redo(),$(document).trigger(GlobalEditor.HistoryManager.UPDATE))};GlobalEditor.HistoryManager.removeAll=function(){for(;this.items.length>0;)this.items.pop();this.idx=-1;$(document).trigger(GlobalEditor.HistoryManager.UPDATE)};
GlobalEditor.HistoryManager.go=function(a){for(a=this.items.indexOf(a);this.idx!=a;)a<this.idx?(this.items[this.idx].undo(),this.idx--):(this.idx++,this.items[this.idx].redo());$(document).trigger(GlobalEditor.HistoryManager.UPDATE)};GlobalEditor.HistoryItem=function(a,b,d){this.type=a;this.undo=b;this.redo=d};GlobalEditor.HistoryManager.addEditAction=function(a,b,d,c){this.add(a,function(){c(b)},function(){c(d)})};
GlobalEditor.HistoryPanel=function(){function a(){var a=GlobalEditor.HistoryManager.items.length,b=GlobalEditor.HistoryManager.idx;a==0?(c.addClass("disabled"),e.addClass("disabled"),f.addClass("disabled")):(f.removeClass("disabled"),b==a-1?(e.addClass("disabled"),c.removeClass("disabled")):(b==-1?c.addClass("disabled"):c.removeClass("disabled"),e.removeClass("disabled")));g.empty();a=GlobalEditor.HistoryManager.items.length;if(a==0)g.text("\u6ca1\u6709\u4efb\u4f55\u5386\u53f2\u8bb0\u5f55");else for(var b=
[],d=GlobalEditor.HistoryManager.idx,i=0;i<a;i++){var l=new GlobalEditor.HistoryItemView(GlobalEditor.HistoryManager.items[i]);l.view.prependTo(g);b.push(l);i==d&&b[i].view.addClass("active")}}var b=$("#historyPanel"),d=b.find(".ui.tab.segment .menu .item"),c=d.eq(0),e=d.eq(1),f=d.eq(2),g=b.find(".ui.tab.segment .list");a();c.click(function(){GlobalEditor.HistoryManager.undo()});e.click(function(){GlobalEditor.HistoryManager.redo()});f.click(function(){GlobalEditor.HistoryManager.removeAll()});$(document).bind(GlobalEditor.HistoryManager.UPDATE,
a);this.getUndoAble=function(){return!c.hasClass("disabled")};this.getRedoAble=function(){return!e.hasClass("disabled")}};
GlobalEditor.HistoryItemView=function(a){var b={switchTool:{icon:"check circle icon",label:"\u5207\u6362\u4e86\u5de5\u5177"},edit:{icon:"edit icon",label:"\u7f16\u8f91\u4e86\u5143\u7d20"},copy:{icon:"copy icon",label:"\u590d\u5236\u4e86\u5143\u7d20"},paste:{icon:"paste icon",label:"\u7c98\u8d34\u4e86\u5143\u7d20"},cut:{icon:"cut icon",label:"\u526a\u5207\u4e86\u5143\u7d20"},addDataSource:{icon:"add circle icon",label:"\u6dfb\u52a0\u4e86\u6570\u636e\u6e90"},delDataSource:{icon:"trash icon",label:"\u5220\u9664\u4e86\u6570\u636e\u6e90"},
editDataSource:{icon:"edit icon",label:"\u7f16\u8f91\u4e86\u6570\u636e\u6e90"},addImageLayer:{icon:"add circle icon",label:"\u6dfb\u52a0\u4e86\u56fe\u5c42"},delImageLayer:{icon:"trash icon",label:"\u5220\u9664\u4e86\u56fe\u5c42"},editImageLayer:{icon:"edit icon",label:"\u7f16\u8f91\u4e86\u56fe\u5c42"},addComponent:{icon:"add circle icon",label:"\u6dfb\u52a0\u4e86\u7ec4\u4ef6"},editComponent:{icon:"edit icon",label:"\u7f16\u8f91\u4e86\u7ec4\u4ef6"},delComponent:{icon:"trash icon",label:"\u5220\u9664\u4e86\u7ec4\u4ef6"}};
this.view=$('<div class="item"></div>');this.icon=$('<i class="'+b[a.type].icon+'"></i>');this.content=$('<div class="content"><div class="header">'+b[a.type].label+"</div></div>");this.icon.appendTo(this.view);this.content.appendTo(this.view);this.view.click(function(){GlobalEditor.HistoryManager.go(a)})};
GlobalEditor.ButtonGroupSwitcher=function(a,b){var d=this,c=a.find("button"),e=-1,f=[];c.each(function(a,b){$(b).click(function(){if(e!=a&&(d.selectIdx(a),d.onChange!=void 0))d.onChange(d.getValue())});f.push($(b).attr("data-value"))});this.selectIdx=function(a){e>-1&&c.eq(e).removeClass("active");e=a;c.eq(a).addClass("active")};this.setValue=function(a){this.selectIdx(f.indexOf(a))};this.getValue=function(){return f[e]};b!=void 0&&this.setValue(b)};
GlobalEditor.Dropdown=function(a,b){var d=this;this.view=GlobalEditor.FormViewManager.createDropdownView(a,b);this.dropdown=this.view.find(".ui.dropdown");this.fireChangeEvent=!0;this.dropdown.dropdown({onChange:function(a,b,f){if(d.onChange!=void 0&&d.fireChangeEvent)d.onChange(a,b,f)}});this.setValue=function(a){this.fireChangeEvent=!1;this.dropdown.dropdown("set selected",a.toString());this.fireChangeEvent=!0}};
GlobalEditor.ColorPicker=function(a,b){var d=this;this.view=b;this.view.val(a);var c;this.view.colorPicker({animationSpeed:0,renderCallback:function(a,b){if(b==!0)c=a.val();else if(b==!1){if(d.onSubmit!=void 0)d.onSubmit(c)}else if(b==void 0&&(c=a.val(),d.onChange!=void 0))d.onChange(c)}});this.setColor=function(a){this.view.val(a);this.view.css("background-color",a)}};
GlobalEditor.Slider=function(a,b,d,c){var e=this,f=a.find(".ui.slider").get(0);noUiSlider.create(f,{start:[c],range:{min:[b],max:[d]}});var g=a.find("input").get(0);f.noUiSlider.on("update",function(a,b){var d=a[b];g.value=d;if(e.onUpdate!=void 0)e.onUpdate(d)});g.addEventListener("change",function(){f.noUiSlider.set(this.value);if(e.onChange!=void 0)e.onChange(this.value)});f.noUiSlider.on("change",function(){var a=e.getValue();if(e.onChange!=void 0)e.onChange(a)});this.getValue=function(){return f.noUiSlider.get()};
this.setValue=function(a){f.noUiSlider.set(a)}};
GlobalEditor.InputWin=function(a){var b=$(a),d=b.find(".header i").eq(0),c=b.find(".header label").eq(0),e=b.find("input").eq(0),f=b.find(".right.labeled .label").eq(0),g=b.find(".actions button").eq(0),h;g.click(function(){g.addClass("disabled");b.modal("hide");h!=void 0&&h(e.val())});this.setOption=function(a){d.attr("class",a.icon);c.text(a.title);e.attr("placeholder",a.placeholder);f.text(a.rightlabel);g.text(a.submitLabel);e.val(a.value);h=a.onSubmit};this.show=function(a){this.setOption(a);
g.removeClass("disabled");b.modal("show")}};
GlobalEditor.Alert=function(){var a={},b=$("<div class='ui small modal'>");$("<div class='header'><i class='warning circle icon'></i><label>\u63d0\u793a</label></div>").appendTo(b);var d=$("<div class='content'>");d.appendTo(b);var c=$("<div class='actions'>");c.appendTo(b);var e=$('<button class="ui primary button">'),f=$('<button class="ui button">');e.click(function(){e.addClass("disabled");b.modal("hide");if(a.onSubmit!=void 0)a.onSubmit()});f.click(function(){f.addClass("disabled");b.modal("hide")});
a.show=function(g,h,j,k){e.removeClass("disabled");f.removeClass("disabled");e.detach();f.detach();e.text("Submit");f.text("Cancel");h!=void 0&&(e.text(h),e.appendTo(c));j!=void 0&&(f.text(j),f.appendTo(c));a.onSubmit=k;d.text(g);b.modal("show")};return a}();
GlobalEditor.EditMaterialWin=function(a){function b(){l.removeClass("disabled");$.each(i,function(){this.reset()});j.dropdown("set selected",(0).toString())}function d(a,b){for(key in a)key!="className"&&(a[key]=b[key])}function c(a,b){function d(){var a={x:Number(f.val()),y:Number(g.val())};if(c.onChange!=void 0)c.onChange(a)}var c=this,e=a.find("input"),f=e.eq(0),g=e.eq(1);f.val(b.x);g.val(b.y);f.change(function(){d()});g.change(function(){d()});this.setPosition=function(a){f.val(a.x);g.val(a.y)}}
var e=this,f=["ColorMaterialProperty","CompositeMaterialProperty","GridMaterialProperty","ImageMaterialProperty","PolylineGlowMaterialProperty","PolylineOutlineMaterialProperty","StripeMaterialProperty"],g={ColorMaterialProperty:{color:"#ffffff"},CompositeMaterialProperty:{},GridMaterialProperty:{color:"#ffffff",cellAlpha:1,lineCount:{x:8,y:8},lineThickness:{x:1,y:1},lineOffset:{x:0,y:0}},ImageMaterialProperty:{image:"",repeat:{x:1,y:1},color:"#ffffff",transparent:!1},PolylineGlowMaterialProperty:{color:"#ffffff",
glowPower:0.25},PolylineOutlineMaterialProperty:{color:"#ffffff",outlineColor:"#000000",outlineWidth:1},StripeMaterialProperty:{evenColor:"#ffffff",oddColor:"#000000",repeat:1,offset:0,orientation:0}},h=$(a),j=h.find(".ui.dropdown").eq(0),k=h.find("#tab0,#tab1,#tab2,#tab3,#tab4,#tab5,#tab6"),i=[new function(a,b){var c=GlobalEditor.ObjectUtil.clone(b),e=a.find(".colorPicker").eq(0),g=new GlobalEditor.ColorPicker(c.color,e);g.onChange=function(a){c.color=a};this.reset=function(){c.color=b.color;g.setColor(c.color)};
this.setValue=function(a){a=this.encode(a);d(c,a);g.setColor(c.color)};this.getValue=function(){return this.decode(c)};this.show=function(){a.show()};this.encode=function(a){return{className:f[0],color:GlobalEditor.CesiumUtil.getPropertyValue(a.color).toCssColorString()}};this.decode=function(a){a=Cesium.Color.fromCssColorString(a.color);return new Cesium.ColorMaterialProperty(a)}}(k.eq(0),g.ColorMaterialProperty),new function(a){this.reset=function(){};this.setValue=function(){};this.getValue=function(){return this.decode()};
this.show=function(){a.show()};this.encode=function(){return{className:f[1]}};this.decode=function(){return new Cesium.CompositeMaterialProperty}}(k.eq(1),g.CompositeMaterialProperty),new function(a,b){var e=GlobalEditor.ObjectUtil.clone(b),g=a.find(".colorPicker").eq(0),h=new GlobalEditor.ColorPicker(e.color,g);h.onChange=function(a){e.color=a};var g=a.children().eq(1),i=new GlobalEditor.Slider(g,0,1,e.cellAlpha);i.onChange=function(a){e.cellAlpha=Number(a)};var g=a.children().eq(2),j=a.children().eq(3),
k=a.children().eq(4),p=new c(g,e.lineCount),l=new c(j,e.lineThickness),q=new c(k,e.lineOffset);p.onChange=function(a){e.lineCount=a};l.onChange=function(a){e.lineThickness=a};q.onChange=function(a){e.lineOffset=a};this.reset=function(){e.color=b.color;e.cellAlpha=b.cellAlpha;e.lineCount=b.lineCount;e.lineThickness=b.lineThickness;e.lineOffset=b.lineOffset;h.setColor(e.color);i.setValue(e.cellAlpha);p.setPosition(e.lineCount);l.setPosition(e.lineThickness);q.setPosition(e.lineOffset)};this.setValue=
function(a){a=this.encode(a);d(e,a);h.setColor(e.color);i.setValue(e.cellAlpha);p.setPosition(e.lineCount);l.setPosition(e.lineThickness);q.setPosition(e.lineOffset)};this.getValue=function(){return this.decode(e)};this.show=function(){a.show()};this.encode=function(a){return{className:f[2],color:a.color==void 0?b.color:GlobalEditor.CesiumUtil.getPropertyValue(a.color).toCssColorString(),cellAlpha:a.cellAlpha==void 0?b.cellAlpha:GlobalEditor.CesiumUtil.getPropertyValue(a.cellAlpha),lineCount:a.lineCount==
void 0?b.lineCount:c.getPosition(GlobalEditor.CesiumUtil.getPropertyValue(a.lineCount)),lineThickness:a.lineThickness==void 0?b.lineThickness:c.getPosition(GlobalEditor.CesiumUtil.getPropertyValue(a.lineThickness)),lineOffset:a.lineOffset==void 0?b.lineOffset:c.getPosition(GlobalEditor.CesiumUtil.getPropertyValue(a.lineOffset))}};this.decode=function(a){a={color:Cesium.Color.fromCssColorString(a.color),cellAlpha:a.cellAlpha,lineCount:c.toCartesian2(a.lineCount),lineThickness:c.toCartesian2(a.lineThickness),
lineOffset:c.toCartesian2(a.lineOffset)};return new Cesium.GridMaterialProperty(a)}}(k.eq(2),g.GridMaterialProperty),new function(a,b){var e=GlobalEditor.ObjectUtil.clone(b),g=a.find(".colorPicker").eq(0),h=new GlobalEditor.ColorPicker(e.color,g);h.onChange=function(a){e.color=a};var i=a.find(".ui.checkbox").eq(0);i.checkbox({onChange:function(){var a=i.checkbox("is checked");e.transparent=a}});var j=a.children().eq(0).find("input").eq(0);j.change(function(){e.image=j.val()});var g=a.children().eq(1),
k=new c(g,e.repeat);k.onChange=function(a){e.repeat=a};this.reset=function(){e.image=b.image;e.repeat=b.repeat;e.color=b.color;e.transparent=b.transparent;j.val(e.image);k.setPosition(e.repeat);h.setColor(e.color);i.checkbox(e.transparent?"set checked":"set unchecked")};this.setValue=function(a){a=this.encode(a);d(e,a);j.val(e.image);k.setPosition(e.repeat);h.setColor(e.color);i.checkbox(e.transparent?"set checked":"set unchecked")};this.getValue=function(){return this.decode(e)};this.show=function(){a.show()};
this.encode=function(a){return{className:f[3],image:a.image==void 0?b.image:GlobalEditor.CesiumUtil.getPropertyValue(a.image),repeat:a.repeat==void 0?b.repeat:c.getPosition(GlobalEditor.CesiumUtil.getPropertyValue(a.repeat)),color:a.color==void 0?b.color:GlobalEditor.CesiumUtil.getPropertyValue(a.color).toCssColorString(),transparent:a.transparent==void 0?b.transparent:GlobalEditor.CesiumUtil.getPropertyValue(a.transparent)}};this.decode=function(a){a={image:a.image,repeat:c.toCartesian2(a.repeat),
color:Cesium.Color.fromCssColorString(a.color),transparent:a.transparent};return new Cesium.ImageMaterialProperty(a)}}(k.eq(3),g.ImageMaterialProperty),new function(a,b){var c=GlobalEditor.ObjectUtil.clone(b),e=a.find(".colorPicker").eq(0),g=new GlobalEditor.ColorPicker(c.color,e);g.onChange=function(a){c.color=a};var e=a.children().eq(1),h=new GlobalEditor.Slider(e,0,1,c.glowPower);h.onChange=function(a){c.glowPower=a};this.reset=function(){c.color=b.color;c.glowPower=b.glowPower;g.setColor(c.color);
h.setValue(c.glowPower)};this.setValue=function(a){a=this.encode(a);d(c,a);g.setColor(c.color);h.setValue(c.glowPower)};this.getValue=function(){return this.decode(c)};this.show=function(){a.show()};this.encode=function(a){return{className:f[4],color:a.color==void 0?b.color:GlobalEditor.CesiumUtil.getPropertyValue(a.color).toCssColorString(),glowPower:a.glowPower==void 0?b.glowPower:GlobalEditor.CesiumUtil.getPropertyValue(a.glowPower)}};this.decode=function(a){a={color:Cesium.Color.fromCssColorString(a.color),
glowPower:a.glowPower};return new Cesium.PolylineGlowMaterialProperty(a)}}(k.eq(4),g.PolylineGlowMaterialProperty),new function(a,b){var c=GlobalEditor.ObjectUtil.clone(b),e=a.find(".colorPicker").eq(0),g=a.find(".colorPicker").eq(1),h=new GlobalEditor.ColorPicker(c.color,e);h.onChange=function(a){c.color=a};var i=new GlobalEditor.ColorPicker(c.outlineColor,g);i.onChange=function(a){c.outlineColor=a};var j=a.children().eq(2).find("input").eq(0);j.change(function(){c.outlineWidth=Number(j.val())});
this.reset=function(){c.color=b.color;c.outlineColor=b.outlineColor;c.outlineWidth=b.outlineWidth;h.setColor(c.color);i.setColor(c.outlineColor);j.val(c.outlineWidth)};this.setValue=function(a){a=this.encode(a);d(c,a);h.setColor(c.color);i.setColor(c.outlineColor);j.val(c.outlineWidth)};this.getValue=function(){return this.decode(c)};this.show=function(){a.show()};this.encode=function(a){return{className:f[5],color:a.color==void 0?b.color:GlobalEditor.CesiumUtil.getPropertyValue(a.color).toCssColorString(),
outlineColor:a.outlineColor==void 0?b.outlineColor:GlobalEditor.CesiumUtil.getPropertyValue(a.outlineColor).toCssColorString(),outlineWidth:a.outlineWidth==void 0?b.outlineWidth:GlobalEditor.CesiumUtil.getPropertyValue(a.outlineWidth)}};this.decode=function(a){a={color:Cesium.Color.fromCssColorString(a.color),outlineColor:Cesium.Color.fromCssColorString(a.outlineColor),outlineWidth:a.outlineWidth};return new Cesium.PolylineOutlineMaterialProperty(a)}}(k.eq(5),g.PolylineOutlineMaterialProperty),new function(a,
b){var c=GlobalEditor.ObjectUtil.clone(b),e=a.find(".colorPicker").eq(0),g=a.find(".colorPicker").eq(1),h=new GlobalEditor.ColorPicker(c.evenColor,e);h.onChange=function(a){c.evenColor=a};var i=new GlobalEditor.ColorPicker(c.oddColor,g);i.onChange=function(a){c.oddColor=a};var j=a.find(".ui.dropdown").eq(0);j.dropdown({onChange:function(a){c.orientation=Number(a)}});var k=a.children().eq(2).find("input").eq(0),l=a.children().eq(3).find("input").eq(0);k.change(function(){c.repeat=Number(k.val())});
l.change(function(){c.offset=Number(l.val())});this.reset=function(){c.evenColor=b.evenColor;c.oddColor=b.oddColor;c.repeat=b.repeat;c.offset=b.offset;c.orientation=b.orientation;h.setColor(c.evenColor);i.setColor(c.oddColor);k.val(c.repeat);l.val(c.offset);j.dropdown("set selected",c.orientation.toString())};this.setValue=function(a){a=this.encode(a);d(c,a);h.setColor(c.evenColor);i.setColor(c.oddColor);k.val(c.repeat);l.val(c.offset);j.dropdown("set selected",c.orientation.toString())};this.getValue=
function(){return this.decode(c)};this.show=function(){a.show()};this.encode=function(a){return{className:f[6],evenColor:a.evenColor==void 0?b.evenColor:GlobalEditor.CesiumUtil.getPropertyValue(a.evenColor).toCssColorString(),oddColor:a.oddColor==void 0?b.oddColor:GlobalEditor.CesiumUtil.getPropertyValue(a.oddColor).toCssColorString(),repeat:a.repeat==void 0?b.repeat:GlobalEditor.CesiumUtil.getPropertyValue(a.repeat),offset:a.offset==void 0?b.offset:GlobalEditor.CesiumUtil.getPropertyValue(a.offset),
orientation:a.orientation==void 0?b.orientation:GlobalEditor.CesiumUtil.getPropertyValue(a.orientation)}};this.decode=function(a){a={evenColor:Cesium.Color.fromCssColorString(a.evenColor),oddColor:Cesium.Color.fromCssColorString(a.oddColor),repeat:a.repeat,offset:a.offset,orientation:a.orientation};return new Cesium.StripeMaterialProperty(a)}}(k.eq(6),g.StripeMaterialProperty)];j.dropdown({onChange:function(a){a=Number(a);k.hide();i[a].show();h.modal("refresh")}});var l=h.find(".actions button").eq(0);
l.click(function(){l.addClass("disabled");var a;a=Number(j.dropdown("get value"));a=i[a].getValue();e.onSubmit(a);h.modal("hide")});k.hide();this.openForEditMaterial=function(a,c){this.onSubmit=c;b();if(a!=void 0){var d=e.getClassName(a),d=f.indexOf(d);j.dropdown("set selected",d.toString());i[d].setValue(a)}h.modal("show")};c.getPosition=function(a){return{x:a.x,y:a.y}};c.toCartesian2=function(a){return new Cesium.Cartesian2(a.x,a.y)};this.getClassNames=function(){return f};this.getClassName=function(a){for(var b=
a.constructor.name,c=0;c<f.length;c++){var d=f[c];if(a instanceof Cesium[d]){b=d;break}}return b};this.isMaterialProperty=function(a){a=this.getClassName(a);return f.indexOf(a)>-1};this.encode=function(a){var b=this.getClassName(a),b=f.indexOf(b);return i[b].encode(a)};this.decode=function(a){var b=f.indexOf(a.className);return i[b].decode(a)}};
GlobalEditor.ComponentBase=function(){this.descriptor=new GlobalEditor.ComponentBaseDescriptor(this);this.play=function(){};this.stop=function(){};this.getOptions=function(){return{}};this.cloneOptionsHandle=function(a){return a};this.clone=function(a){var b=GlobalEditor.ObjectUtil.clone(this.getOptions()),b=a==void 0?b:a(b),b=this.cloneOptionsHandle(b);return new this.constructor(b)}};
GlobalEditor.ComponentManager={map:{},loadItems:[],gecp:{},loadComponent:function(a,b,d){this.isGecpFile(b)?this.loadComponentFromGecpFile(a,b,d):this.loadComponentFromFolder(a,b,d)},loadComponentFromFolder:function(a,b,d){$.getJSON("componentLib/"+a+"/"+b+"/config.json",function(c){function e(){$.getScript("componentLib/"+a+"/"+b+"/"+c.require[f],function(){f++;f==c.require.length?d(c):e(f)})}if(c.require.length==0)d(c);else{var f=0;e()}})},loadComponentFromGecpFile:function(a,b,d){var c=this;$.getJSON("componentLib/"+
a+"/"+b,function(a){var f={desc:a.component.desc,icon:a.component.icon,name:a.component.name};c.gecp[b]=f;a=a.component.js;try{eval(a),d(f)}catch(g){GlobalEditor.Alert.show(g)}})},isGecpFile:function(a){return a.split(".").indexOf("gecp")==1},append:function(a,b,d){this.loadItems.push({type:a,name:b,onComplete:d})},startLoad:function(a){function b(c){var e=d.loadItems[c];d.loadComponent(e.type,e.name,function(f){e.onComplete(f);c++;c<d.loadItems.length?b(c):a!=void 0&&a()})}var d=this;b(0)}};
GlobalEditor.ComponentManager.map.EntityComponent=function(a){GlobalEditor.ComponentBase.call(this);var b=GlobalEditor.editorContainer.viewer;this.play=function(){this.entity=b.entities.add(this.getEntityOptions());this.descriptor=new GlobalEditor.EntityDescriptor(this.entity);if(this.title!=void 0)this.descriptor.title=this.title;a.settings!=void 0&&this.descriptor.dataModel.setSettings(a.settings)};this.stop=function(){b.entities.remove(this.entity)};this.getEntityOptions=function(){return{}};this.getOptions=
function(){a.settings=this.descriptor.dataModel.getSettings();return a};this.cloneOptionsHandle=function(a){a.settings.position=void 0;return a}};GlobalEditor.ComponentBaseDescriptor=function(){this.title="\u57fa\u672c\u7ec4\u4ef6";this.dataModel=new GlobalEditor.DescriptorDataModel(this);GlobalEditor.BasicDescriptor.call(this,this.dataModel)};GlobalEditor.FormViewManager={};GlobalEditor.FormViewManager.createPositionView=function(){return $('<div class="inline fields">\t<div class="eight wide field">\t\t<label>X</label>\t\t<input type="text" placeholder="">   </div>   <div class="eight wide field">\t\t<label>Y</label>\t\t<input type="text" placeholder="">\t</div></div>')};
GlobalEditor.FormViewManager.createSizeView=function(){return $('<div class="inline fields">\t<div class="eight wide field">\t\t<label>\u5bbd</label>\t\t<input type="text" placeholder="">   </div>   <div class="eight wide field">\t\t<label>\u9ad8</label>\t\t<input type="text" placeholder="">\t</div></div>')};GlobalEditor.FormViewManager.createHline=function(){return $('<div class="ui divider"></div>')};
GlobalEditor.FormViewManager.createCheckBoxView=function(a){return $('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<div class="ui checkbox">\t\t\t<input type="checkbox">\t\t\t<label></label>\t\t</div>\t</div></div>')};
GlobalEditor.FormViewManager.createDropdownView=function(a,b){for(var d=$('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<div class="ui selection dropdown">\t\t\t<i class="dropdown icon"></i>\t\t\t<div class="default text"></div>\t\t\t<div class="menu">\t\t\t</div>\t\t</div>\t</div></div>'),c=d.find(".menu"),e=b.length,f=0;f<e;f++)$('<div class="item" data-value="'+b[f].value+'">'+b[f].label+"</div>").appendTo(c);return d};
GlobalEditor.FormViewManager.createHeader=function(a){var b=$("<div>",{style:"padding:3px;background-color:#e9e9e9;margin-bottom:10px;font-size:11px;"});b.text(a);return b};GlobalEditor.FormViewManager.createColorPickerView=function(a){return $('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<div class="colorPicker">\t\t\t<div class="box"></div>\t\t</div>\t</div></div>')};
GlobalEditor.FormViewManager.createTextInputView=function(a){return $('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<input type="text" placeholder="">\t</div></div>')};
GlobalEditor.FormViewManager.createTextInputWithRightLabelView=function(a,b){return $('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<div class="ui right labeled input">\t\t\t<input type="text" placeholder="">\t\t\t<div class="ui basic label">'+b+"</div>\t\t</div>\t</div></div>")};GlobalEditor.FormViewManager.createTextAreaView=function(a){return $('<div class="field">\t<label>'+a+'</label>\t<textarea style="margin-top: 0px; margin-bottom: 0px; height: 148px;"></textarea></div>')};
GlobalEditor.FormViewManager.createSliderView=function(a){return $('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eight wide field">\t\t<div class="ui slider" style="width:95%"></div>\t</div>\t<div class="four wide field">\t\t<input type="text" placeholder="">\t</div></div>')};
GlobalEditor.FormViewManager.createIconButtonGroupView=function(a,b){for(var d=$('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<div class="ui icon basic buttons"></div>\t</div></div>'),c=d.find(".buttons"),e=0;e<b.length;e++)$('<button class="ui button" data-value="'+b[e].value+'"><i class="'+b[e].icon+' icon"></i></button>').appendTo(c);return d};
GlobalEditor.FormViewManager.createButtonGroupView=function(a,b){for(var d=$('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<div class="ui icon basic buttons"></div>\t</div></div>'),c=d.find(".buttons"),e=0;e<b.length;e++)$('<button class="ui button" data-value="'+b[e].value+'">'+b[e].label+"</button>").appendTo(c);return d};
GlobalEditor.FormViewManager.createCesiumCartesian3View=function(a){return $('<div class="inline fields">\t<label style="position:absolute;margin-top:7px;">'+a+'</label>\t<div class="five wide field"></div>\t<div class="eleven wide">\t\t<div class="inline fields"><label>x</label><input type="text"></div>\t\t<div class="inline fields"><label>y</label><input type="text"></div>\t\t<div class="inline fields" style="margin-bottom:0;"><label>z</label><input type="text"></div>\t</div></div>')};
GlobalEditor.FormViewManager.createCesiumCartesian2View=function(a){return $('<div class="inline fields">\t<label style="position:absolute;margin-top:7px;">'+a+'</label>\t<div class="five wide field"></div>\t<div class="eleven wide">\t\t<div class="inline fields"><label>x</label><input type="text"></div>\t\t<div class="inline fields" style="margin-bottom:0;"><label>y</label><input type="text"></div>\t</div></div>')};
GlobalEditor.FormViewManager.createCesiumOrientationView=function(a){return $('<div class="inline fields">\t<label style="position:absolute;margin-top:7px;">'+a+'</label>\t<div class="five wide field"></div>\t<div class="eleven wide">\t\t<div class="inline fields"><label>heading</label><div class="ui slider" style="margin-left:10px;margin-right:10px;width:100px"></div><input type="text" style="max-width:50px;"></div>\t\t<div class="inline fields"><label>pitch</label><div class="ui slider" style="margin-left:10px;margin-right:10px;width:100px"></div><input type="text" style="max-width:50px;"></div>\t\t<div class="inline fields" style="margin-bottom:0;"><label>roll</label><div class="ui slider" style="margin-left:10px;margin-right:10px;width:100px"></div><input type="text" style="max-width:50px;"></div>\t</div></div>')};
GlobalEditor.FormViewManager.createIconView=function(a,b){var d=$('<div class="inline fields">\t<label style="position:absolute;margin-top:0px;">'+a+'</label>\t<div class="five wide field"></div>\t<div class="eleven wide"></div></div>'),c=d.find(".eleven.wide").eq(0),e=$('<div class="iconPicker">');e.innerWidth(b.width);e.innerHeight(b.height);e.appendTo(c);c=$("<canvas>");c.get(0).width=b.width;c.get(0).height=b.height;c.appendTo(e);return d};
GlobalEditor.FormViewManager.createCesiumMaterialView=function(a){return $('<div class="inline fields">\t<div class="five wide field">\t\t<label>'+a+'</label>\t</div>\t<div class="eleven wide field">\t\t<button class="ui button">\u7f16\u8f91\u6750\u8d28</button>\t</div></div>')};
GlobalEditor.BasicDescriptor=function(a){this.dataModels=[a];this.init=function(a){a.header.text(this.title);var d=a.form;this.container=d;$.each(this.dataModels,function(){this.createTo(d)})};this.update=function(){this.container!=void 0&&$.each(this.dataModels,function(){this.update()})}};
GlobalEditor.ViewerDescriptor=function(){this.title="\u89c6\u56fe";var a=new GlobalEditor.DescriptorDataModel(this);a.add({type:"slider",label:"\u89e3\u6790\u5ea6",name:"resolutionScale",min:0.01,max:1});a.add({type:"checkBox",label:"\u9634\u5f71",name:"shadows"});a.add({type:"checkBox",label:"\u5730\u5f62\u9634\u5f71",name:"terrainShadows"});a.add({type:"header",label:"\u573a\u666f"});a.add({type:"checkBox",label:"\u5149\u7167",name:"enableLighting"});a.add({type:"checkBox",label:"\u96fe",name:"enableFog"});
a.add({type:"checkBox",label:"\u6297\u5267\u9f7f",name:"fxaa"});a.add({type:"header",label:"\u5929\u7a7a\u76d2"});a.add({type:"checkBox",label:"\u663e\u793a",name:"showSkyBox"});a.add({type:"header",label:"\u5927\u6c14\u5c42"});var b=GlobalEditor.editorContainer.viewer,d=new GlobalEditor.SkyAtmosphereDataModel(new GlobalEditor.SkyAtmosphereDelegate(b.scene.skyAtmosphere));d.name="skyAtmosphere";a.add(d);GlobalEditor.BasicDescriptor.call(this,a);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
b,"resolutionScale");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,b,"shadows");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,b,"terrainShadows");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,b.scene,"fxaa");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,b.scene.globe,"enableLighting");this.getEnableFog=function(){return GlobalEditor.editorContainer.viewer.scene.fog.enabled};this.setEnableFog=function(a){GlobalEditor.editorContainer.viewer.scene.fog.enabled=
a};this.getShowSkyBox=function(){return GlobalEditor.editorContainer.viewer.scene.skyBox.show};this.setShowSkyBox=function(a){GlobalEditor.editorContainer.viewer.scene.skyBox.show=a};this.getSettings=function(){return a.getSettings()};this.setSettings=function(b){a.setSettings(b)};this.clear=function(){a.setSettings(this.defaultSettings)};this.defaultSettings=this.getSettings()};
GlobalEditor.EntityDescriptor=function(a){this.title="Entity";this.delegate=new GlobalEditor.EntityDelegate(a);this.dataModel=new GlobalEditor.EntityDataModel(this.delegate);GlobalEditor.BasicDescriptor.call(this,this.dataModel)};GlobalEditor.DescriptorDataModel=function(a){var b=this;this.delegate=a;this.items=[];this.itemControllers=[];this.add=function(a){this.items.push(a)};this.remove=function(a){a=this.items.indexOf(a);a>-1&&(this.items.splice(a,1),this.itemControllers.splice(a,1))};this.createTo=function(a){function c(e){if(e!=b.items.length){var f=b.items[e];b.isDataModel(f)?(f.createTo(a),b.itemControllers.push(f.itemControllers)):(f=GlobalEditor.DescItemMap.create(f,b,a),b.itemControllers.push(f));e++;c(e)}}if(this.items.length!=
0)this.itemControllers=[],c(0)};this.getAndSetFuncForName=function(a){a=GlobalEditor.DescriptorDataModel.getFuncName(a);return[this.delegate[a.getStr],this.delegate[a.setStr]]};this.update=function(){function a(b){for(var e=0;e<b.length;e++){var f=b[e];f instanceof Array?a(f):f.update!=void 0&&f.update()}}a(this.itemControllers)};this.isDataModel=function(a){return a.type==void 0&&a.createTo!=void 0};this.getSettings=function(){function a(e){if(e!=b.items.length){var f=b.items[e];if(b.isDataModel(f))c[f.name]=
f.getSettings();else if(f.name!=void 0){var g=b.getAndSetFuncForName(f.name)[0];c[f.name]=g()}e++;a(e)}}var c={};a(0);return c=this.encodeSettings(c)};this.setSettings=function(a){a=this.decodeSettings(a);for(key in a){var b=this.getAndSetFuncForName(key)[1];b!=void 0?a[key]!=void 0&&b(a[key]):(b=this.getSubDataModelByName(key),b!=void 0&&b.setSettings(a[key]))}};this.encodeSettings=function(a){var b={};for(key in a){var e=a[key];if(typeof e=="object")if(this.getAndSetFuncForName(key)[1]!=void 0)b[key]=
GlobalEditor.DescriptorDataModel.Encoder.encode(e);else{var f=this.getSubDataModelByName(key);f!=void 0&&(b[key]=f.encodeSettings(e))}else b[key]=e}return b};this.decodeSettings=function(a){var b={};for(key in a){var e=a[key];if(typeof e=="object")if(this.getAndSetFuncForName(key)[1]!=void 0)b[key]=GlobalEditor.DescriptorDataModel.Encoder.decode(e);else{var f=this.getSubDataModelByName(key);f!=void 0&&(b[key]=f.decodeSettings(e))}else b[key]=e}return b};this.getSubDataModelByName=function(a){for(var b=
this.items.length,e=0;e<b;e++){var f=this.items[e];if(this.isDataModel(f)&&f.name==a)return f}}};
GlobalEditor.DescriptorDataModel.Encoder={encode:function(a){return a instanceof Cesium.Cartesian3?{x:a.x,y:a.y,z:a.z,className:"Cartesian3"}:a instanceof Cesium.Cartesian2?{x:a.x,y:a.y,className:"Cartesian2"}:a instanceof Cesium.Cartographic?{lng:a.longitude,lat:a.latitude,height:a.height,className:"Cartographic"}:GlobalEditor.editMaterialWin.isMaterialProperty(a)?GlobalEditor.editMaterialWin.encode(a):a},decode:function(a){return a.className=="Cartesian3"?new Cesium.Cartesian3(a.x,a.y,a.z):a.className==
"Cartesian2"?new Cesium.Cartesian2(a.x,a.y):a.className=="Cartographic"?new Cesium.Cartographic(a.lng,a.lat,a.height):GlobalEditor.editMaterialWin.getClassNames().indexOf(a.className)>-1?GlobalEditor.editMaterialWin.decode(a):a}};GlobalEditor.DescriptorDataModel.getFuncName=function(a){var b=a.length,a=a.charAt(0).toUpperCase()+a.substr(1,b-1);return{getStr:"get"+a,setStr:"set"+a}};
GlobalEditor.DescriptorDataModelHandle={donothing:function(a){return a},emptyToUndefined:function(a){return a!=""?a:void 0},cesiumProperty:function(a){return GlobalEditor.CesiumUtil.getPropertyValue(a)},cesiumColorProperty:function(a){return GlobalEditor.CesiumUtil.getPropertyValue(a).toCssColorString()},numberValue:function(a){return Number(a)},cesiumColorValue:function(a){return Cesium.Color.fromCssColorString(a)},cesiumPositionsString:function(a){var a=GlobalEditor.CesiumUtil.getPropertyValue(a),
b=[];$.each(a,function(){var a=Cesium.Cartographic.fromCartesian(this);b.push({lng:Cesium.Math.toDegrees(a.longitude),lat:Cesium.Math.toDegrees(a.latitude),height:a.height})});return JSON.stringify(b)},cesiumPositionsValue:function(a){var b=[],a=JSON.parse(a);$.each(a,function(){var a=Cesium.Cartesian3.fromDegrees(this.lng,this.lat,this.height);b.push(a)});return b},cesiumNearFarScalarString:function(a){a=GlobalEditor.CesiumUtil.getPropertyValue(a);a!=""&&(a=[a.near,a.nearValue,a.far,a.farValue].join(","));
return a},cesiumNearFarScalarValue:function(a){var b,a=a.split(",");a.length==4&&(b=new Cesium.NearFarScalar(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3])));return b},cesiumCartesian2ArrayString:function(a){var a=GlobalEditor.CesiumUtil.getPropertyValue(a),b=[];$.each(a,function(){b.push({x:this.x,y:this.y})});return JSON.stringify(b)},cesiumCartesian2ArrayValue:function(a){var b=[],a=JSON.parse(a);$.each(a,function(){var a=new Cesium.Cartesian2(this.x,this.y);b.push(a)});return b},cesiumRectangleString:function(a){a=
GlobalEditor.CesiumUtil.getPropertyValue(a);return JSON.stringify({west:Cesium.Math.toDegrees(a.west),south:Cesium.Math.toDegrees(a.south),east:Cesium.Math.toDegrees(a.east),north:Cesium.Math.toDegrees(a.north)})},cesiumRectangleValue:function(a){a=JSON.parse(a);return Cesium.Rectangle.fromDegrees(a.west,a.south,a.east,a.north)},cesiumDegress:function(a){return Cesium.Math.toDegrees(GlobalEditor.CesiumUtil.getPropertyValue(a))},cesiumRadiansValue:function(a){return Cesium.Math.toRadians(Number(a))},
cesiumArrayString:function(a){return GlobalEditor.CesiumUtil.getPropertyValue(a).join(",")},cesiumArrayValue:function(a){return a.split(",")}};GlobalEditor.DescriptorDataModel.createGetterAndSetter=function(a,b,d,c,e,f,g){var h=this.getFuncName(d);a[h.getStr]=function(){f!=void 0&&(b[d]=Cesium.defaultValue(b[d],f));return(c==void 0?GlobalEditor.DescriptorDataModelHandle.donothing:c)(b[d])};a[h.setStr]=function(a){b[d]=(e==void 0?GlobalEditor.DescriptorDataModelHandle.donothing:e)(a);g!=void 0&&g()}};
GlobalEditor.BillboardDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"input",label:"\u56fe\u7247",name:"image"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"slider",label:"\u7f29\u653e",name:"scale",min:0,max:10});this.add({type:"dropdown",label:"\u6c34\u5e73\u951a\u70b9",name:"horizontalOrigin",data:[{label:"\u5de6",value:Cesium.HorizontalOrigin.LEFT},{label:"\u4e2d",value:Cesium.HorizontalOrigin.CENTER},{label:"\u53f3",value:Cesium.HorizontalOrigin.RIGHT}]});
this.add({type:"dropdown",label:"\u5782\u76f4\u951a\u70b9",name:"verticalOrigin",data:[{label:"\u4e0a",value:Cesium.VerticalOrigin.TOP},{label:"\u4e2d",value:Cesium.VerticalOrigin.CENTER},{label:"\u4e0b",value:Cesium.VerticalOrigin.BOTTOM}]});this.add({type:"hline"});this.add({type:"cesiumCartesian3",label:"eyeOffset",name:"eyeOffset"});this.add({type:"cesiumCartesian2",label:"pixelOffset",name:"pixelOffset"});this.add({type:"slider",label:"\u65cb\u8f6c",name:"rotation",min:-360,max:360});this.add({type:"cesiumCartesian3",
label:"alignedAxis",name:"alignedAxis"});this.add({type:"size",name:"size"});this.add({type:"color",label:"\u989c\u8272",name:"color"});this.add({type:"input",label:"scale By Distance",name:"scaleByDistance"});this.add({type:"input",label:"translucency By Distance",name:"translucencyByDistance"});this.add({type:"input",label:"pixelOffset Scale By Distance",name:"pixelOffsetScaleByDistance"});this.add({type:"checkBox",label:"sizeInMeters",name:"sizeInMeters"})};
GlobalEditor.BillboardDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"image",GlobalEditor.DescriptorDataModelHandle.cesiumProperty);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"scale",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"horizontalOrigin",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.HorizontalOrigin.CENTER);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"verticalOrigin",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.VerticalOrigin.CENTER);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"eyeOffset",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,
Cesium.Cartesian3.ZERO);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"pixelOffset",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,Cesium.Cartesian2.ZERO);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"rotation",GlobalEditor.DescriptorDataModelHandle.cesiumDegress,GlobalEditor.DescriptorDataModelHandle.cesiumRadiansValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"alignedAxis",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
void 0,Cesium.Cartesian3.ZERO);this.getSize=function(){return{width:GlobalEditor.CesiumUtil.getPropertyValue(a.width),height:GlobalEditor.CesiumUtil.getPropertyValue(a.height)}};this.setSize=function(b){a.width=b.width!=""?Number(b.width):void 0;a.height=b.height!=""?Number(b.height):void 0};GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"color",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.WHITE);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"scaleByDistance",GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarString,GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"translucencyByDistance",GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarString,GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"pixelOffsetScaleByDistance",GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarString,
GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"sizeInMeters",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1)};
GlobalEditor.BoxDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"cesiumCartesian3",label:"dimensions",name:"dimensions"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"checkBox",label:"\u586b\u5145",name:"fill"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",
label:"outlineWidth"})};
GlobalEditor.BoxDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"dimensions",GlobalEditor.DescriptorDataModelHandle.cesiumProperty);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");
GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,
1)};
GlobalEditor.CorridorDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"textArea",name:"positions",label:"positions"});this.add({type:"input",name:"width",label:"\u5bbd"});this.add({type:"dropdown",name:"cornerType",label:"cornerType",data:[{label:"ROUNDED",value:Cesium.CornerType.ROUNDED},{label:"BEVELED",value:Cesium.CornerType.BEVELED},{label:"MITERED",value:Cesium.CornerType.MITERED}]});this.add({type:"input",name:"height",label:"\u9ad8"});this.add({type:"input",name:"extrudedHeight",
label:"extruded height"});this.add({type:"checkBox",name:"show",label:"\u663e\u793a"});this.add({type:"checkBox",name:"fill",label:"\u586b\u5145"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"input",name:"granularity",label:"granularity"})};
GlobalEditor.CorridorDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"positions",GlobalEditor.DescriptorDataModelHandle.cesiumPositionsString,GlobalEditor.DescriptorDataModelHandle.cesiumPositionsValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"width",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"cornerType",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
void 0,Cesium.CornerType.ROUNDED);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"height",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"extrudedHeight",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,
Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"granularity",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.Math.RADIANS_PER_DEGREE)};
GlobalEditor.CylinderDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"input",name:"length",label:"length"});this.add({type:"input",name:"topRadius",label:"topRadius"});this.add({type:"input",name:"bottomRadius",label:"bottomRadius"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"checkBox",label:"\u586b\u5145",name:"fill"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",
label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"input",name:"numberOfVerticalLines",label:"number Of VerticalLines"});this.add({type:"input",name:"slices",label:"slices"})};
GlobalEditor.CylinderDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"length",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"topRadius",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"bottomRadius",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"numberOfVerticalLines",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
GlobalEditor.DescriptorDataModelHandle.numberValue,16);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"slices",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,128)};
GlobalEditor.EllipseDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"input",name:"semiMajorAxis",label:"semiMajor Axis"});this.add({type:"input",name:"semiMinorAxis",label:"semiMinor Axis"});this.add({type:"input",name:"height",label:"height"});this.add({type:"input",name:"extrudedHeight",label:"extruded Height"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"checkBox",label:"\u586b\u5145",name:"fill"});this.add({type:"cesiumMaterial",
name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"input",name:"numberOfVerticalLines",label:"number Of VerticalLines"});this.add({type:"slider",label:"\u65cb\u8f6c",name:"rotation",min:-360,max:360});this.add({type:"slider",label:"stRotation",name:"stRotation",min:-360,max:360});this.add({type:"input",name:"granularity",
label:"granularity"})};
GlobalEditor.EllipseDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"semiMajorAxis",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"semiMinorAxis",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"height",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
GlobalEditor.DescriptorDataModelHandle.numberValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"extrudedHeight",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,
!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",
GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"numberOfVerticalLines",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,16);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"rotation",GlobalEditor.DescriptorDataModelHandle.cesiumDegress,GlobalEditor.DescriptorDataModelHandle.cesiumRadiansValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"stRotation",GlobalEditor.DescriptorDataModelHandle.cesiumDegress,GlobalEditor.DescriptorDataModelHandle.cesiumRadiansValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"granularity",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.Math.RADIANS_PER_DEGREE)};
GlobalEditor.EllipsoidDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"cesiumCartesian3",label:"radii",name:"radii"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"checkBox",label:"\u586b\u5145",name:"fill"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",
label:"outlineWidth"});this.add({type:"input",name:"subdivisions",label:"subdivisions"});this.add({type:"input",name:"stackPartitions",label:"stack Partitions"});this.add({type:"input",name:"slicePartitions",label:"slice Partitions"})};
GlobalEditor.EllipsoidDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"radii",GlobalEditor.DescriptorDataModelHandle.cesiumProperty);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");
GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,
1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"subdivisions",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,128);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"stackPartitions",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,64);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"slicePartitions",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
GlobalEditor.DescriptorDataModelHandle.numberValue,64)};
GlobalEditor.LabelDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"textArea",name:"text",label:"\u6587\u5b57"});this.add({type:"input",name:"font",label:"\u5b57\u4f53"});this.add({type:"dropdown",name:"style",label:"style",data:[{label:"FILL",value:Cesium.LabelStyle.FILL},{label:"FILL_AND_OUTLINE",value:Cesium.LabelStyle.FILL_AND_OUTLINE},{label:"OUTLINE",value:Cesium.LabelStyle.OUTLINE}]});this.add({type:"color",name:"fillColor",label:"fillColor"});this.add({type:"color",
name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"slider",label:"\u7f29\u653e",name:"scale",min:0,max:10});this.add({type:"dropdown",label:"\u6c34\u5e73\u951a\u70b9",name:"horizontalOrigin",data:[{label:"\u5de6",value:Cesium.HorizontalOrigin.LEFT},{label:"\u4e2d",value:Cesium.HorizontalOrigin.CENTER},{label:"\u53f3",value:Cesium.HorizontalOrigin.RIGHT}]});this.add({type:"dropdown",
label:"\u5782\u76f4\u951a\u70b9",name:"verticalOrigin",data:[{label:"\u4e0a",value:Cesium.VerticalOrigin.TOP},{label:"\u4e2d",value:Cesium.VerticalOrigin.CENTER},{label:"\u4e0b",value:Cesium.VerticalOrigin.BOTTOM}]});this.add({type:"hline"});this.add({type:"cesiumCartesian3",label:"eyeOffset",name:"eyeOffset"});this.add({type:"cesiumCartesian2",label:"pixelOffset",name:"pixelOffset"});this.add({type:"input",label:"translucency By Distance",name:"translucencyByDistance"});this.add({type:"input",label:"pixelOffset Scale By Distance",
name:"pixelOffsetScaleByDistance"})};
GlobalEditor.LabelDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"text",GlobalEditor.DescriptorDataModelHandle.cesiumProperty);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"font",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.emptyToUndefined);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"style",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,
Cesium.LabelStyle.FILL);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fillColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.WHITE);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"scale",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"horizontalOrigin",
GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.HorizontalOrigin.CENTER);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"verticalOrigin",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.VerticalOrigin.CENTER);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"eyeOffset",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,Cesium.Cartesian3.ZERO);
GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"pixelOffset",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,Cesium.Cartesian2.ZERO);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"translucencyByDistance",GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarString,GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"pixelOffsetScaleByDistance",GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarString,
GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarValue)};
GlobalEditor.ModelDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"input",label:"\u5730\u5740",name:"uri"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"slider",label:"\u7f29\u653e",name:"scale",min:0,max:1E4});this.add({type:"input",label:"\u6700\u5c0f\u50cf\u7d20\u503c",name:"minimumPixelSize"});this.add({type:"input",label:"\u6700\u5927\u7f29\u653e\u503c",name:"maximumScale"});this.add({type:"checkBox",label:"\u589e\u91cf\u52a0\u8f7d<br>\u7eb9\u7406",
name:"incrementallyLoadTextures"});this.add({type:"checkBox",label:"\u6295\u5c04\u9634\u5f71",name:"castShadows"});this.add({type:"checkBox",label:"\u63a5\u53d7\u9634\u5f71",name:"receiveShadows"});this.add({type:"checkBox",label:"\u64ad\u653e\u52a8\u753b",name:"runAnimations"})};
GlobalEditor.ModelDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"uri",GlobalEditor.DescriptorDataModelHandle.cesiumProperty);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"scale",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"minimumPixelSize",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"maximumScale",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"incrementallyLoadTextures",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"castShadows",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"receiveShadows",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"runAnimations",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0)};
GlobalEditor.PointDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"color",name:"color",label:"\u989c\u8272"});this.add({type:"input",name:"pixelSize",label:"pixelSize"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"input",label:"scale By Distance",name:"scaleByDistance"});this.add({type:"input",label:"translucency By Distance",
name:"translucencyByDistance"})};
GlobalEditor.PointDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"color",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.WHITE);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"pixelSize",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",
GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"scaleByDistance",GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarString,GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"translucencyByDistance",GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarString,GlobalEditor.DescriptorDataModelHandle.cesiumNearFarScalarValue)};
GlobalEditor.PolygonDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"textArea",name:"hierarchy",label:"hierarchy"});this.add({type:"input",name:"height",label:"\u9ad8"});this.add({type:"input",name:"extrudedHeight",label:"extruded height"});this.add({type:"checkBox",name:"show",label:"\u663e\u793a"});this.add({type:"checkBox",name:"fill",label:"\u586b\u5145"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",
label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"slider",label:"stRotation",name:"stRotation",min:-360,max:360});this.add({type:"input",name:"granularity",label:"granularity"});this.add({type:"checkBox",name:"perPositionHeight",label:"perPosition Height"});this.add({type:"checkBox",name:"closeTop",label:"closeTop"});this.add({type:"checkBox",name:"closeBottom",label:"closeBottom"})};
GlobalEditor.PolygonDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"hierarchy",GlobalEditor.DescriptorDataModelHandle.cesiumPositionsString,GlobalEditor.DescriptorDataModelHandle.cesiumPositionsValue);this.getHeight=function(){return GlobalEditor.CesiumUtil.getPropertyValue(a.height)};this.setHeight=function(b){var d=GlobalEditor.CesiumUtil.getPropertyValue(a.perPositionHeight);a.height=d?void 0:Number(b)};this.getPerPositionHeight=function(){return GlobalEditor.CesiumUtil.getPropertyValue(a.perPositionHeight)};
this.setPerPositionHeight=function(b){if(b)a.height=void 0;a.perPositionHeight=b};GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"extrudedHeight",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",
GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"stRotation",GlobalEditor.DescriptorDataModelHandle.cesiumDegress,GlobalEditor.DescriptorDataModelHandle.cesiumRadiansValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"granularity",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.Math.RADIANS_PER_DEGREE);
GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"closeTop",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"closeBottom",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0)};
GlobalEditor.PolylineDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"textArea",name:"positions",label:"positions"});this.add({type:"checkBox",name:"followSurface",label:"follow Surface"});this.add({type:"input",name:"width",label:"\u5bbd"});this.add({type:"checkBox",name:"show",label:"\u663e\u793a"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"input",name:"granularity",label:"granularity"})};
GlobalEditor.PolylineDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"positions",GlobalEditor.DescriptorDataModelHandle.cesiumPositionsString,GlobalEditor.DescriptorDataModelHandle.cesiumPositionsValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"followSurface",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"width",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"granularity",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.Math.RADIANS_PER_DEGREE)};
GlobalEditor.PolylineVolumeDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"textArea",name:"positions",label:"positions"});this.add({type:"textArea",name:"shape",label:"shape"});this.add({type:"dropdown",name:"cornerType",label:"cornerType",data:[{label:"ROUNDED",value:Cesium.CornerType.ROUNDED},{label:"BEVELED",value:Cesium.CornerType.BEVELED},{label:"MITERED",value:Cesium.CornerType.MITERED}]});this.add({type:"checkBox",name:"show",label:"\u663e\u793a"});this.add({type:"checkBox",
name:"fill",label:"\u586b\u5145"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"input",name:"granularity",label:"granularity"})};
GlobalEditor.PolylineVolumeDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"positions",GlobalEditor.DescriptorDataModelHandle.cesiumPositionsString,GlobalEditor.DescriptorDataModelHandle.cesiumPositionsValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"shape",GlobalEditor.DescriptorDataModelHandle.cesiumCartesian2ArrayString,GlobalEditor.DescriptorDataModelHandle.cesiumCartesian2ArrayValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"cornerType",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,Cesium.CornerType.ROUNDED);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"granularity",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.Math.RADIANS_PER_DEGREE)};
GlobalEditor.RectangleDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"textArea",name:"coordinates",label:"coordinates"});this.add({type:"input",name:"height",label:"\u9ad8"});this.add({type:"input",name:"extrudedHeight",label:"extruded height"});this.add({type:"checkBox",name:"closeTop",label:"closeTop"});this.add({type:"checkBox",name:"closeBottom",label:"closeBottom"});this.add({type:"checkBox",name:"show",label:"\u663e\u793a"});this.add({type:"checkBox",name:"fill",
label:"\u586b\u5145"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",name:"outline",label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"slider",label:"\u65cb\u8f6c",name:"rotation",min:-360,max:360});this.add({type:"slider",label:"stRotation",name:"stRotation",min:-360,max:360});this.add({type:"input",name:"granularity",label:"granularity"})};
GlobalEditor.RectangleDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"coordinates",GlobalEditor.DescriptorDataModelHandle.cesiumRectangleString,GlobalEditor.DescriptorDataModelHandle.cesiumRectangleValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"height",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"extrudedHeight",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,
GlobalEditor.DescriptorDataModelHandle.numberValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"closeTop",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"closeBottom",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"rotation",GlobalEditor.DescriptorDataModelHandle.cesiumDegress,GlobalEditor.DescriptorDataModelHandle.cesiumRadiansValue,0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"stRotation",GlobalEditor.DescriptorDataModelHandle.cesiumDegress,GlobalEditor.DescriptorDataModelHandle.cesiumRadiansValue,0);
GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"granularity",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.Math.RADIANS_PER_DEGREE)};
GlobalEditor.WallDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"textArea",name:"positions",label:"positions"});this.add({type:"textArea",name:"maximumHeights",label:"maximumHeights"});this.add({type:"textArea",name:"minimumHeights",label:"minimumHeights"});this.add({type:"checkBox",name:"show",label:"\u663e\u793a"});this.add({type:"checkBox",name:"fill",label:"\u586b\u5145"});this.add({type:"cesiumMaterial",name:"material",label:"\u6750\u8d28"});this.add({type:"checkBox",
name:"outline",label:"outline"});this.add({type:"color",name:"outlineColor",label:"outlineColor"});this.add({type:"input",name:"outlineWidth",label:"outlineWidth"});this.add({type:"input",name:"granularity",label:"granularity"})};
GlobalEditor.WallDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"positions",GlobalEditor.DescriptorDataModelHandle.cesiumPositionsString,GlobalEditor.DescriptorDataModelHandle.cesiumPositionsValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"maximumHeights",GlobalEditor.DescriptorDataModelHandle.cesiumArrayString,GlobalEditor.DescriptorDataModelHandle.cesiumArrayValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"minimumHeights",
GlobalEditor.DescriptorDataModelHandle.cesiumArrayString,GlobalEditor.DescriptorDataModelHandle.cesiumArrayValue);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"fill",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!0);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"material");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"outline",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,void 0,!1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineColor",GlobalEditor.DescriptorDataModelHandle.cesiumColorProperty,GlobalEditor.DescriptorDataModelHandle.cesiumColorValue,Cesium.Color.BLACK);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"outlineWidth",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,1);GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,
a,"granularity",GlobalEditor.DescriptorDataModelHandle.cesiumProperty,GlobalEditor.DescriptorDataModelHandle.numberValue,Cesium.Math.RADIANS_PER_DEGREE)};
GlobalEditor.EntityDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);var b=this;this.add({type:"input",label:"id",name:"id"});this.add({type:"input",label:"\u540d\u79f0",name:"name"});this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"hline"});this.add({type:"cesiumCartographic",label:"\u4f4d\u7f6e",name:"position"});this.add({type:"cesiumOrientation",label:"\u65b9\u5411",name:"orientation"});$.each([{name:"billboard",dataModelClass:GlobalEditor.BillboardDataModel,
delegateClass:GlobalEditor.BillboardDelegate},{name:"box",dataModelClass:GlobalEditor.BoxDataModel,delegateClass:GlobalEditor.BoxDelegate},{name:"corridor",dataModelClass:GlobalEditor.CorridorDataModel,delegateClass:GlobalEditor.CorridorDelegate},{name:"cylinder",dataModelClass:GlobalEditor.CylinderDataModel,delegateClass:GlobalEditor.CylinderDelegate},{name:"ellipse",dataModelClass:GlobalEditor.EllipseDataModel,delegateClass:GlobalEditor.EllipseDelegate},{name:"ellipsoid",dataModelClass:GlobalEditor.EllipsoidDataModel,
delegateClass:GlobalEditor.EllipsoidDelegate},{name:"label",dataModelClass:GlobalEditor.LabelDataModel,delegateClass:GlobalEditor.LabelDelegate},{name:"model",dataModelClass:GlobalEditor.ModelDataModel,delegateClass:GlobalEditor.ModelDelegate},{name:"point",dataModelClass:GlobalEditor.PointDataModel,delegateClass:GlobalEditor.PointDelegate},{name:"polygon",dataModelClass:GlobalEditor.PolygonDataModel,delegateClass:GlobalEditor.PolygonDelegate},{name:"polyline",dataModelClass:GlobalEditor.PolylineDataModel,
delegateClass:GlobalEditor.PolylineDelegate},{name:"polylineVolume",dataModelClass:GlobalEditor.PolylineVolumeDataModel,delegateClass:GlobalEditor.PolylineVolumeDelegate},{name:"rectangle",dataModelClass:GlobalEditor.RectangleDataModel,delegateClass:GlobalEditor.RectangleDelegate},{name:"wall",dataModelClass:GlobalEditor.WallDataModel,delegateClass:GlobalEditor.WallDelegate}],function(){if(a.entity[this.name]!=void 0){b.add({type:"header",label:this.name});var d=new this.dataModelClass(new this.delegateClass(a.entity[this.name]));
d.name=this.name;b.add(d)}});this.add({type:"hline"});this.add({type:"textArea",label:"\u63cf\u8ff0",name:"description"})};
GlobalEditor.EntityDelegate=function(a){var b=this;this.entity=a;GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"id");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"name");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"description",GlobalEditor.DescriptorDataModelHandle.cesiumProperty);this.getPosition=function(){var b=GlobalEditor.CesiumUtil.getPropertyValue(a.position);return Cesium.Cartographic.fromCartesian(b)};
this.setPosition=function(b){a.position=Cesium.Cartesian3.fromRadians(b.longitude,b.latitude,b.height)};this.orientationConfig={heading:0,pitch:0,roll:0};this.getOrientation=function(){return b.orientationConfig};this.setOrientation=function(d){b.orientationConfig=d;var c=GlobalEditor.CesiumUtil.getPropertyValue(a.position),e=Cesium.Math.toRadians(d.heading),f=Cesium.Math.toRadians(d.pitch),d=Cesium.Math.toRadians(d.roll);a.orientation=Cesium.Transforms.headingPitchRollQuaternion(c,e,f,d)}};
GlobalEditor.CameraDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"cesiumCartesian3",name:"direction",label:"\u65b9\u5411"});this.add({type:"cesiumCartesian3",name:"position",label:"\u4f4d\u7f6e"});this.add({type:"cesiumCartographic",name:"positionCartographic",label:"\u5730\u56fe\u4f4d\u7f6e"});this.add({type:"cesiumCartesian3",name:"right",label:"\u53f3"});this.add({type:"cesiumCartesian3",name:"up",label:"\u4e0a"})};
GlobalEditor.CameraDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"direction");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"position");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"positionCartographic");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"right");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"up")};
GlobalEditor.SkyAtmosphereDataModel=function(a){GlobalEditor.DescriptorDataModel.call(this,a);this.add({type:"checkBox",label:"\u663e\u793a",name:"show"});this.add({type:"slider",label:"\u8272\u76f8\u504f\u79fb",name:"hueShift",min:-1,max:1});this.add({type:"slider",label:"\u9971\u548c\u5ea6\u504f\u79fb",name:"saturationShift",min:-1,max:1});this.add({type:"slider",label:"\u4eae\u5ea6\u504f\u79fb",name:"brightnessShift",min:-1,max:1})};
GlobalEditor.SkyAtmosphereDelegate=function(a){GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"show");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"hueShift");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"saturationShift");GlobalEditor.DescriptorDataModel.createGetterAndSetter(this,a,"brightnessShift")};GlobalEditor.DescItemMap={};GlobalEditor.DescItemMap.create=function(a,b,d){return new this[a.type](a,b,d)};
GlobalEditor.DescItemMap.checkBox=function(a,b,d){var c=GlobalEditor.FormViewManager.createCheckBoxView(a.label);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],g=c.find(".ui.checkbox").eq(0);g.checkbox(e()?"set checked":"set unchecked");a.checkBox=g;g.checkbox({onChange:function(){var b=e(),c=g.checkbox("is checked");GlobalEditor.HistoryManager.addEditAction("edit",b,c,function(b){f(b);a.checkBox.checkbox(b?"set checked":"set unchecked")})}});this.view=c;this.checkBox=g};
GlobalEditor.DescItemMap.color=function(a,b,d){var c=GlobalEditor.FormViewManager.createColorPickerView(a.label);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[1],f=(0,b[0])(),b=new GlobalEditor.ColorPicker(f,c.find(".colorPicker"));a.colorPicker=b;b.onChange=function(a){e(a)};b.onSubmit=function(b){f!=b&&GlobalEditor.HistoryManager.addEditAction("edit",f,b,function(b){a.colorPicker.setColor(b);e(b);f=b})};this.view=c;this.colorPicker=b};
GlobalEditor.DescItemMap.dropdown=function(a,b,d){var c=new GlobalEditor.Dropdown(a.label,a.data);c.view.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1];c.setValue(e());a.dropdown=c;c.onChange=function(b){var c=e();GlobalEditor.HistoryManager.addEditAction("edit",c,b,function(b){f(b);a.dropdown.setValue(b)})}};GlobalEditor.DescItemMap.header=function(a,b,d){GlobalEditor.FormViewManager.createHeader(a.label).appendTo(d)};GlobalEditor.DescItemMap.hline=function(a,b,d){GlobalEditor.FormViewManager.createHline().appendTo(d)};
GlobalEditor.DescItemMap.html=function(a,b,d){$(a.html).appendTo(d)};
GlobalEditor.DescItemMap.input=function(a,b,d){var c=a.rightLabel==void 0?GlobalEditor.FormViewManager.createTextInputView(a.label):GlobalEditor.FormViewManager.createTextInputWithRightLabelView(a.label,a.rightLabel);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],g=c.find("input").eq(0);g.val(e());a.input=g;g.change(function(){var b=e(),c=g.val();GlobalEditor.HistoryManager.addEditAction("edit",b,c,function(b){f(b);a.input.val(b)})});this.view=c;this.input=g};
GlobalEditor.DescItemMap.position=function(a,b,d){var c=GlobalEditor.FormViewManager.createPositionView();c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],c=c.find("input"),g=c.eq(0),h=c.eq(1),c=e();g.val(c.x);h.val(c.y);a.xInput=g;a.yInput=h;g.change(function(){var b=e(),c=e();c.x=Number(g.val());GlobalEditor.HistoryManager.addEditAction("edit",b,c,function(b){f(b);a.xInput.val(b.x)})});h.change(function(){var b=e(),c=e();c.y=Number(h.val());GlobalEditor.HistoryManager.addEditAction("edit",
b,c,function(b){f(b);a.yInput.val(b.y)})});this.update=function(){var a=e();g.val(a.x);h.val(a.y)}};
GlobalEditor.DescItemMap.size=function(a,b,d){var c=GlobalEditor.FormViewManager.createSizeView();c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],b=c.find("input"),g=b.eq(0),h=b.eq(1),d=e();g.val(d.width);h.val(d.height);a.wInput=g;a.hInput=h;$.each([g,h],function(){this.change(function(){var b=e(),c=Number(g.val()),d=Number(h.val());GlobalEditor.HistoryManager.addEditAction("edit",b,{width:c,height:d},function(b){f(b);a.wInput.val(b.width);a.hInput.val(b.height)})})});this.update=
function(){var a=e();g.val(a.width);h.val(a.height)};this.view=c;this.inputs=b};GlobalEditor.DescItemMap.slider=function(a,b,d){var c=GlobalEditor.FormViewManager.createSliderView(a.label);c.appendTo(d);var d=b.getAndSetFuncForName(a.name),b=d[0],e=d[1],c=new GlobalEditor.Slider(c,a.min,a.max,b());a.slider=c;var f=b();c.onUpdate=function(a){e(a)};c.onChange=function(b){GlobalEditor.HistoryManager.addEditAction("edit",f,b,function(b){a.slider.setValue(b);e(b);f=b})}};
GlobalEditor.DescItemMap.tabs=function(a,b,d){var c=GlobalEditor.FormViewManager.createButtonGroupView(a.label,a.items);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],c=new GlobalEditor.ButtonGroupSwitcher(c,e());a.switcher=c;c.onChange=function(b){var c=e();GlobalEditor.HistoryManager.addEditAction("edit",c,b,function(b){f(b);a.switcher.setValue(b)})}};
GlobalEditor.DescItemMap.textArea=function(a,b,d){var c=GlobalEditor.FormViewManager.createTextAreaView(a.label);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],g=c.find("textarea").eq(0);g.val(e());a.textArea=g;g.change(function(){var b=e(),c=g.val();GlobalEditor.HistoryManager.addEditAction("edit",b,c,function(b){f(b);a.textArea.val(b)})});this.view=c;this.textArea=g};
GlobalEditor.DescItemMap.icon=function(a,b,d){function c(a){var b=h.getContext("2d");b.clearRect(0,0,h.width,h.height);if(a!=""){var c=new Image;c.src=a;c.onload=function(){var a=h.width/c.width<h.height/c.height?h.width/c.width:h.height/c.height,d=c.width*a;a*=c.height;b.drawImage(c,0,0,c.width,c.height,(h.width-d)*0.5,(h.height-a)*0.5,d,a)}}}function e(a){var b=$("<input type='file'>");b.trigger("click");b.change(function(){var c=b.get(0).files[0];a(c)})}function f(b){var c=j();GlobalEditor.HistoryManager.addEditAction("edit",
c,b,function(b){k(b);a.setValue(b)})}var g=GlobalEditor.FormViewManager.createIconView(a.label,a.size);g.appendTo(d);var d=g.find(".iconPicker"),h=d.find("canvas").get(0);d.click(function(){e(function(a){var b=new FileReader;b.onload=function(){f(b.result)};b.readAsDataURL(a)})});var b=b.getAndSetFuncForName(a.name),j=b[0],k=b[1];c(j());a.setValue=c};
GlobalEditor.DescItemMap.cesiumCartesian3=function(a,b,d){var c=GlobalEditor.FormViewManager.createCesiumCartesian3View(a.label);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],c=c.find("input"),g=c.eq(0),h=c.eq(1),j=c.eq(2),c=e();g.val(c.x);h.val(c.y);j.val(c.z);a.xInput=g;a.yInput=h;a.zInput=j;$.each([g,h,j],function(){this.change(function(){var b=e(),c=Number(g.val()),d=Number(h.val()),m=Number(j.val()),c=new Cesium.Cartesian3(c,d,m);GlobalEditor.HistoryManager.addEditAction("edit",
b,c,function(b){f(b);a.xInput.val(b.x);a.yInput.val(b.y);a.zInput.val(b.z)})})});this.update=function(){var a=e();g.val(a.x);h.val(a.y);j.val(a.z)}};
GlobalEditor.DescItemMap.cesiumCartesian2=function(a,b,d){var c=GlobalEditor.FormViewManager.createCesiumCartesian2View(a.label);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[0],f=b[1],c=c.find("input"),g=c.eq(0),h=c.eq(1),c=e();g.val(c.x);h.val(c.y);a.xInput=g;a.yInput=h;$.each([g,h],function(){this.change(function(){var b=e(),c=Number(g.val()),d=Number(h.val()),c=new Cesium.Cartesian2(c,d);GlobalEditor.HistoryManager.addEditAction("edit",b,c,function(b){f(b);a.xInput.val(b.x);a.yInput.val(b.y)})})})};
GlobalEditor.DescItemMap.cesiumCartographic=function(a,b,d){var c=GlobalEditor.FormViewManager.createCesiumCartesian3View(a.label);c.appendTo(d);var e=c.find("label");$.each(["lng","lat","\u9ad8"],function(a){e.eq(a+1).text(this)});var b=b.getAndSetFuncForName(a.name),f=b[0],g=b[1],c=c.find("input"),h=c.eq(0),j=c.eq(1),k=c.eq(2),d=f(),c=Cesium.Math.toDegrees(d.longitude),b=Cesium.Math.toDegrees(d.latitude),d=d.height;j.val(b);h.val(c);k.val(d);a.latInput=j;a.lngInput=h;a.hInput=k;$.each([j,h,k],function(){this.change(function(){var b=
f(),c=Number(h.val()),d=Number(j.val()),e=Number(k.val()),c=Cesium.Cartographic.fromDegrees(c,d,e);GlobalEditor.HistoryManager.addEditAction("edit",b,c,function(b){g(b);var c=Cesium.Math.toDegrees(b.longitude),d=Cesium.Math.toDegrees(b.latitude),b=b.height;a.latInput.val(d);a.lngInput.val(c);a.hInput.val(b)})})});this.update=function(){var a=f(),b=Cesium.Math.toDegrees(a.longitude),c=Cesium.Math.toDegrees(a.latitude),a=a.height;j.val(c);h.val(b);k.val(a)}};
GlobalEditor.DescItemMap.cesiumOrientation=function(a,b,d){var c=GlobalEditor.FormViewManager.createCesiumOrientationView(a.label);c.appendTo(d);var b=b.getAndSetFuncForName(a.name),e=b[1],f=(0,b[0])(),d=c.find(".eleven.wide").children(),g=["heading","pitch","roll"],c=new GlobalEditor.Slider(d.eq(0),-360,360,f[g[0]]),b=new GlobalEditor.Slider(d.eq(1),-360,360,f[g[1]]),d=new GlobalEditor.Slider(d.eq(2),-360,360,f[g[2]]);a.hSlider=c;a.pSlider=b;a.rSlider=d;$.each([c,b,d],function(b){this.onUpdate=function(a){var c=
GlobalEditor.ObjectUtil.clone(f);c[g[b]]=a;e(c)};this.onChange=function(c){var d=GlobalEditor.ObjectUtil.clone(f);d[g[b]]=c;GlobalEditor.HistoryManager.addEditAction("edit",f,d,function(b){a.hSlider.setValue(b[g[0]]);a.pSlider.setValue(b[g[1]]);a.rSlider.setValue(b[g[2]]);e(b);f=b})}})};
GlobalEditor.DescItemMap.cesiumMaterial=function(a,b,d){var c=GlobalEditor.FormViewManager.createCesiumMaterialView(a.label);c.appendTo(d);var a=b.getAndSetFuncForName(a.name),e=a[0],f=a[1];c.find("button").eq(0).click(function(){var a=e();GlobalEditor.editMaterialWin.openForEditMaterial(a,function(b){GlobalEditor.HistoryManager.addEditAction("edit",a,b,function(a){f(a)})})})};
GlobalEditor.EditorContainer=function(a){this.container=a;Cesium.BingMapsApi.defaultKey="AknGwyGtxa9zlcMazOG8GVPwpFATmyYf5GQOSwOMqTd-JTKe8h4Qwdu0WJRgQvfi";this.viewer=new Cesium.Viewer(a.attr("id"),{contextOptions:{webgl:{preserveDrawingBuffer:!0},allowTextureFilterAnisotropic:!1}});this.viewer.scene.fxaa=!1;this.flyToSelectedItem=function(){this.viewer.selectedEntity!=null&&this.viewer.flyTo(this.viewer.selectedEntity)};this.flyHome=function(){this.viewer.camera.flyHome()};this.getSettings=function(){var a=
{};a.viewer=GlobalEditor.ToolManager.getTools()[0].descriptor.getSettings();return a};this.setSettings=function(a){GlobalEditor.ToolManager.getTools()[0].descriptor.setSettings(a.viewer);GlobalEditor.propertiesPanel.update()};this.clear=function(){GlobalEditor.ToolManager.getTools()[0].descriptor.clear();GlobalEditor.propertiesPanel.update()}};GlobalEditor.RectUtil={};
GlobalEditor.RectUtil.testRectCross=function(a,b){var d,c,e,f;d=a.x+a.width/2;c=a.y+a.height/2;e=b.x+b.width/2;f=b.y+b.height/2;return Math.abs(d-e)<=a.width/2+b.width/2&&Math.abs(c-f)<=a.height/2+b.height/2};GlobalEditor.RectUtil.merge=function(a,b){var d={};d.x=a.x<b.x?a.x:b.x;d.y=a.y<b.y?a.y:b.y;d.width=a.x+a.width>b.x+b.width?a.x+a.width-d.x:b.x+b.width-d.x;d.height=a.y+a.height>b.y+b.height?a.y+a.height-d.y:b.y+b.height-d.y;return d};GlobalEditor.ArrayUtil={};
GlobalEditor.ArrayUtil.equals=function(a,b){var d=!0;if(a.length!=b.length)d=!1;else for(var c=a.length,e=0;e<c;e++)if(a[e]!==b[e]){d=!1;break}return d};GlobalEditor.ArrayUtil.invert=function(a,b){var d=[];$.each(a,function(){b.indexOf(this)==-1&&d.push(this)});return d};GlobalEditor.ArrayUtil.filterRepeat=function(a){var b=[];$.each(a,function(){b.indexOf(this)==-1&&b.push(this)});return b};
GlobalEditor.ArrayUtil.getSameValue=function(a,b){b==void 0&&(b=function(a,b){return a==b});for(var d,c=0;c<a.length;c++)if(c==0)d=a[c];else if(!b(a[c],d)){d="-";break}return d};GlobalEditor.ArrayUtil.repeatValue=function(a,b){for(var d=[],c=0;c<b;c++)d.push(a);return d};GlobalEditor.ObjectUtil={};GlobalEditor.ObjectUtil.clone=function(a){return $.extend({},a)};GlobalEditor.CesiumUtil={};GlobalEditor.CesiumUtil.getPropertyValue=function(a){return a==void 0?"":a._value};
GlobalEditor.CodeMaster={keyStr:"aGVyb2JsYW5rQGdtYWlsLmNvbQ==",encode:function(a){a=Base64.encode(a);a=this.reverseStr(a);a+=this.keyStr;a=Base64.encode(a);return this.reverseStr(a)},decode:function(a){a=this.reverseStr(a);a=Base64.decode(a);a=a.substr(0,a.length-this.keyStr.length);a=this.reverseStr(a);return Base64.decode(a)},reverseStr:function(a){a=a.split("");a=a.reverse();return a.join("")}};
